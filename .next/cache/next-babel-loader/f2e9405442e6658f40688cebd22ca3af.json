{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Router from \"next/router\";\nimport moment from \"jalali-moment\";\nexport var toPersian = function toPersian(val) {\n  if (val) {\n    var id = [\"۰\", \"۱\", \"۲\", \"۳\", \"۴\", \"۵\", \"۶\", \"۷\", \"۸\", \"۹\"];\n    return val.toString().replace(/[0-9]/g, function (w) {\n      return id[+w];\n    });\n  } else {\n    return val;\n  }\n};\nexport var moneyFormat = function moneyFormat(n, x) {\n  try {\n    var re = \"\\\\d(?=(\\\\d{\" + (x || 3) + \"})+\" + (n > 0 ? \"\\\\.\" : \"$\") + \")\";\n    return this.toFixed(Math.max(0, ~~n)).replace(new RegExp(re, \"g\"), \"$&,\");\n  } catch (e) {\n    return \"\";\n  }\n};\nexport var underLine = function underLine() {\n  this.replace(\"/s/g\", \"_\");\n};\nexport var toEnglish = function toEnglish(val) {\n  var find = [\"۰\", \"۱\", \"۲\", \"۳\", \"۴\", \"۵\", \"۶\", \"۷\", \"۸\", \"۹\"];\n  var replace = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n  var replaceString = val;\n  var regex;\n\n  for (var i = 0; i < find.length; i++) {\n    regex = new RegExp(find[i], \"g\");\n    replaceString = replaceString.replace(regex, replace[i]);\n  }\n\n  return replaceString;\n};\nexport var remove = function remove() {\n  var what,\n      a = arguments,\n      L = a.length,\n      ax;\n\n  while (L && this.length) {\n    what = a[--L];\n\n    while ((ax = this.indexOf(what)) !== -1) {\n      this.splice(ax, 1);\n    }\n  }\n\n  return this;\n};\nexport function trunc(s, n) {\n  if (s) {\n    return s.length > n ? s.substr(0, n - 1) + \"...\" : s;\n  } else {\n    return \"\";\n  }\n}\nexport var setIfNumber = function setIfNumber(e, setFieldValue, max) {\n  if (!isNaN(Number(toEnglish(e.target.value)))) {\n    if (!max) {\n      setFieldValue(e.target.name, toEnglish(e.target.value));\n    } else {\n      if (e.target.value.length <= max) {\n        setFieldValue(e.target.name, toEnglish(e.target.value));\n      }\n    }\n  }\n};\nexport var setCookie = function setCookie(cName, cValue, seconds) {\n  var d = new Date();\n  var sec = seconds * 1000;\n  d.setTime(d.getTime() + sec);\n  var expires = \"expires=\".concat(d.toUTCString());\n  document.cookie = \"\".concat(cName, \"=\").concat(cValue, \"; \").concat(expires, \";path=/\");\n};\nexport var getCookie = function getCookie(cName) {\n  var name = \"\".concat(cName, \"=\");\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(\";\");\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == \" \") {\n      c = c.substring(1);\n    }\n\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n};\nexport var checkProtected = function checkProtected(ctx, callback) {\n  var store, res, _store$getState, auth;\n\n  return _regeneratorRuntime.async(function checkProtected$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          store = ctx.store, res = ctx.res;\n          _store$getState = store.getState(), auth = _store$getState.auth;\n          _context.t0 = auth.role;\n          _context.next = _context.t0 === \"user\" ? 5 : 9;\n          break;\n\n        case 5:\n          if (!callback) {\n            _context.next = 8;\n            break;\n          }\n\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(callback());\n\n        case 8:\n          return _context.abrupt(\"break\", 11);\n\n        case 9:\n          if (res) {\n            res.writeHead(302, {\n              Location: \"/login\"\n            });\n            res.end();\n            res.finished = true;\n          } else {\n            Router.push(\"/login\");\n          }\n\n          return _context.abrupt(\"break\", 11);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport function daysRemaining(time) {\n  var eventdate = moment(time);\n  var todaysdate = moment();\n  return eventdate.diff(todaysdate, \"days\");\n}\nexport var checkPremiumDate = function checkPremiumDate(ctx, callback) {\n  var store, res, _store$getState2, user, premium_date, redirect;\n\n  return _regeneratorRuntime.async(function checkPremiumDate$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          store = ctx.store, res = ctx.res;\n          _store$getState2 = store.getState(), user = _store$getState2.user;\n          premium_date = user.item.premium_date; // const testDate = \"2020-08-17T07:59:48.365000\";\n\n          redirect = function redirect() {\n            if (res) {\n              res.writeHead(302, {\n                Location: \"/packages\"\n              });\n              res.end();\n              res.finished = true;\n            } else {\n              Router.push(\"/packages\");\n            }\n          };\n\n          if (!premium_date) {\n            _context2.next = 14;\n            break;\n          }\n\n          if (!(daysRemaining(premium_date) < 0)) {\n            _context2.next = 9;\n            break;\n          }\n\n          redirect();\n          _context2.next = 12;\n          break;\n\n        case 9:\n          if (!callback) {\n            _context2.next = 12;\n            break;\n          }\n\n          _context2.next = 12;\n          return _regeneratorRuntime.awrap(callback());\n\n        case 12:\n          _context2.next = 15;\n          break;\n\n        case 14:\n          redirect();\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var daysLeft = function daysLeft(date) {\n  var now = moment();\n  return now.diff(date, \"days\");\n};\nexport function deleteCookie(name) {\n  document.cookie = name + \"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\n}\nexport function uniq_id() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == \"x\" ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}","map":{"version":3,"sources":["/home/amin/Templates/todo-sample/helpers/props.tsx"],"names":["Router","moment","toPersian","val","id","toString","replace","w","moneyFormat","n","x","re","toFixed","Math","max","RegExp","e","underLine","toEnglish","find","replaceString","regex","i","length","remove","what","a","arguments","L","ax","indexOf","splice","trunc","s","substr","setIfNumber","setFieldValue","isNaN","Number","target","value","name","setCookie","cName","cValue","seconds","d","Date","sec","setTime","getTime","expires","toUTCString","document","cookie","getCookie","decodedCookie","decodeURIComponent","ca","split","c","charAt","substring","checkProtected","ctx","callback","store","res","getState","auth","role","writeHead","Location","end","finished","push","daysRemaining","time","eventdate","todaysdate","diff","checkPremiumDate","user","premium_date","item","redirect","daysLeft","date","now","deleteCookie","uniq_id","r","random","v"],"mappings":"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","sourcesContent":["import Router from \"next/router\";\nimport moment from \"jalali-moment\";\n\nexport const toPersian = function (val) {\n  if (val) {\n    const id = [\"۰\", \"۱\", \"۲\", \"۳\", \"۴\", \"۵\", \"۶\", \"۷\", \"۸\", \"۹\"];\n    return val.toString().replace(/[0-9]/g, function (w) {\n      return id[+w];\n    });\n  } else {\n    return val;\n  }\n};\n\nexport const moneyFormat = function (n, x) {\n  try {\n    const re = \"\\\\d(?=(\\\\d{\" + (x || 3) + \"})+\" + (n > 0 ? \"\\\\.\" : \"$\") + \")\";\n    return this.toFixed(Math.max(0, ~~n)).replace(new RegExp(re, \"g\"), \"$&,\");\n  } catch (e) {\n    return \"\";\n  }\n};\n\nexport const underLine = function () {\n  this.replace(\"/s/g\", \"_\");\n};\n\nexport const toEnglish = function (val) {\n  const find = [\"۰\", \"۱\", \"۲\", \"۳\", \"۴\", \"۵\", \"۶\", \"۷\", \"۸\", \"۹\"];\n  var replace = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n  var replaceString = val;\n  var regex;\n  for (var i = 0; i < find.length; i++) {\n    regex = new RegExp(find[i], \"g\");\n    replaceString = replaceString.replace(regex, replace[i]);\n  }\n  return replaceString;\n};\n\nexport const remove = function () {\n  var what,\n    a = arguments,\n    L = a.length,\n    ax;\n  while (L && this.length) {\n    what = a[--L];\n    while ((ax = this.indexOf(what)) !== -1) {\n      this.splice(ax, 1);\n    }\n  }\n  return this;\n};\n\nexport function trunc(s, n) {\n  if (s) {\n    return s.length > n ? s.substr(0, n - 1) + \"...\" : s;\n  } else {\n    return \"\";\n  }\n}\n\nexport const setIfNumber = (e, setFieldValue, max) => {\n  if (!isNaN(Number(toEnglish(e.target.value)))) {\n    if (!max) {\n      setFieldValue(e.target.name, toEnglish(e.target.value));\n    } else {\n      if (e.target.value.length <= max) {\n        setFieldValue(e.target.name, toEnglish(e.target.value));\n      }\n    }\n  }\n};\n\nexport const setCookie = (cName, cValue, seconds) => {\n  let d = new Date();\n  let sec = seconds * 1000;\n  d.setTime(d.getTime() + sec);\n  let expires = `expires=${d.toUTCString()}`;\n  document.cookie = `${cName}=${cValue}; ${expires};path=/`;\n};\n\nexport const getCookie = (cName) => {\n  let name = `${cName}=`;\n  let decodedCookie = decodeURIComponent(document.cookie);\n  let ca = decodedCookie.split(\";\");\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i];\n    while (c.charAt(0) == \" \") {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n};\n\nexport const checkProtected = async (ctx, callback) => {\n  const { store, res } = ctx;\n  const { auth } = store.getState();\n\n  switch (auth.role) {\n    case \"user\":\n      if (callback) await callback();\n      break;\n\n    default:\n      if (res) {\n        res.writeHead(302, { Location: \"/login\" });\n        res.end();\n        res.finished = true;\n      } else {\n        Router.push(\"/login\");\n      }\n      break;\n  }\n};\n\nexport function daysRemaining(time) {\n  var eventdate = moment(time);\n  var todaysdate = moment();\n  return eventdate.diff(todaysdate, \"days\");\n}\n\nexport const checkPremiumDate = async (ctx, callback) => {\n  const { store, res } = ctx;\n  const { user } = store.getState();\n  const { premium_date } = user.item;\n\n  // const testDate = \"2020-08-17T07:59:48.365000\";\n\n  const redirect = () => {\n    if (res) {\n      res.writeHead(302, { Location: \"/packages\" });\n      res.end();\n      res.finished = true;\n    } else {\n      Router.push(\"/packages\");\n    }\n  };\n\n  if (premium_date) {\n    if (daysRemaining(premium_date) < 0) {\n      redirect();\n    } else {\n      if (callback) await callback();\n    }\n  } else {\n    redirect();\n  }\n};\n\nexport const daysLeft = (date) => {\n  var now = moment();\n  return now.diff(date, \"days\");\n};\n\nexport function deleteCookie(name) {\n  document.cookie = name + \"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\n}\n\nexport function uniq_id() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = (Math.random() * 16) | 0,\n      v = c == \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n"]},"metadata":{},"sourceType":"module"}