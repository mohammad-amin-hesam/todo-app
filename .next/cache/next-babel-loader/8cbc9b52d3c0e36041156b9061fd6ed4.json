{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Axios from \"axios\";\n\nvar api = /*#__PURE__*/function () {\n  function api(obj) {\n    _classCallCheck(this, api);\n\n    _defineProperty(this, \"getState\", void 0);\n\n    _defineProperty(this, \"dispatch\", void 0);\n\n    _defineProperty(this, \"maxRedirects\", void 0);\n\n    _defineProperty(this, \"xhr\", void 0);\n\n    _defineProperty(this, \"time_out\", void 0);\n\n    _defineProperty(this, \"key\", void 0);\n\n    _defineProperty(this, \"params\", void 0);\n\n    _defineProperty(this, \"handleErr\", function (err) {\n      if (!err.response) {// notif(\"سرور متصل نمی‌باشد\", \"danger\", 3);\n      } else if (err.response > 499 && err.response < 600) {// notif(\"خطا در اتصال، مجدداً تلاش کنید\", \"danger\", 3);\n      }\n    });\n\n    _defineProperty(this, \"handleRes\", function (res) {});\n\n    var _obj$getState = obj.getState(),\n        auth = _obj$getState.auth;\n\n    var headers = {\n      \"Content-Type\": obj.content_type || \"application/json; charset=UTF8\"\n    };\n    this.params = {};\n\n    if (auth.key) {\n      this.params.token = auth.key;\n    }\n\n    this.key = auth.key || \"\";\n    this.time_out = 10000;\n    this.getState = obj.getState;\n    this.dispatch = obj.dispatch;\n    this.maxRedirects = 2;\n    this.xhr = Axios.create({\n      baseURL: obj.baseUrl || \"\",\n      headers: headers,\n      responseType: obj.response_type || \"json\"\n    });\n  }\n\n  _createClass(api, [{\n    key: \"Get\",\n    value: function Get(url, params) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        var data = {\n          method: \"get\",\n          params: _objectSpread({}, _this.params)\n        };\n        if (params) data.params = _objectSpread({}, _this.params, {}, params);\n\n        _this.xhr.request(url, data).then(function (res) {\n          _this.handleRes(res);\n\n          resolve(res);\n        })[\"catch\"](function (err) {\n          _this.handleErr(err);\n\n          reject(err);\n        });\n      });\n    }\n  }, {\n    key: \"Put\",\n    value: function Put(url, params) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        var itemParams = _objectSpread({}, _this2.params);\n\n        if (params) itemParams = _objectSpread({}, _this2.params, {}, params);\n\n        _this2.xhr.put(url, itemParams).then(function (res) {\n          _this2.handleRes(res);\n\n          resolve(res);\n        })[\"catch\"](function (err) {\n          _this2.handleErr(err);\n\n          reject(err);\n        });\n      });\n    }\n  }, {\n    key: \"Post\",\n    value: function Post(url, params) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var itemParams = _objectSpread({}, _this3.params);\n\n        if (params) itemParams = _objectSpread({}, _this3.params, {}, params);\n\n        _this3.xhr.post(url, itemParams).then(function (res) {\n          _this3.handleRes(res);\n\n          resolve(res);\n        })[\"catch\"](function (err) {\n          _this3.handleErr(err);\n\n          reject(err);\n        });\n      });\n    }\n  }, {\n    key: \"Upload\",\n    value: function Upload(url, data, uploadCallback) {\n      var _this4 = this;\n\n      return new Promise(function _callee(resolve, reject) {\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this4.xhr.post(url, data, {\n                  headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"multipart/form-data;\"\n                  },\n                  onUploadProgress: uploadCallback ? function (e) {\n                    var progress = Math.floor(e.loaded * 100 / e.total);\n                    uploadCallback(progress);\n                  } : null\n                }).then(function (res) {\n                  _this4.handleRes(res);\n\n                  resolve(res);\n                })[\"catch\"](function (err) {\n                  _this4.handleErr(err);\n\n                  reject(err);\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      });\n    }\n  }, {\n    key: \"Delete\",\n    value: function Delete(url, data) {\n      var _this5 = this;\n\n      return new Promise(function (resolve, reject) {\n        var itemdata = _objectSpread({}, _this5.params);\n\n        if (data) itemdata = _objectSpread({}, _this5.params, {}, data);\n\n        _this5.xhr[\"delete\"](url, {\n          data: itemdata\n        }).then(function (res) {\n          _this5.handleRes(res);\n\n          resolve(res);\n        })[\"catch\"](function (err) {\n          _this5.handleErr(err);\n\n          reject(err);\n        });\n      });\n    }\n  }]);\n\n  return api;\n}();\n\nexport { api as default };","map":{"version":3,"sources":["/home/amin/Templates/todo-sample/api/index.tsx"],"names":["Axios","api","obj","err","response","res","getState","auth","headers","content_type","params","key","token","time_out","dispatch","maxRedirects","xhr","create","baseURL","baseUrl","responseType","response_type","url","Promise","resolve","reject","data","method","request","then","handleRes","handleErr","itemParams","put","post","uploadCallback","Accept","onUploadProgress","e","progress","Math","floor","loaded","total","itemdata"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\n\nexport default class api {\n  getState: () => any;\n  dispatch: () => any;\n  maxRedirects: number;\n  xhr: any;\n  time_out: number;\n  key: string;\n  params: any;\n\n  constructor(obj) {\n    const { auth } = obj.getState();\n    const headers = {\n      \"Content-Type\": obj.content_type || \"application/json; charset=UTF8\",\n    };\n\n    this.params = {};\n\n    if (auth.key) {\n      this.params.token = auth.key;\n    }\n\n    this.key = auth.key || \"\";\n    this.time_out = 10000;\n    this.getState = obj.getState;\n    this.dispatch = obj.dispatch;\n    this.maxRedirects = 2;\n    this.xhr = Axios.create({\n      baseURL: obj.baseUrl || \"\",\n      headers,\n      responseType: obj.response_type || \"json\",\n    });\n  }\n\n  handleErr = (err) => {\n    if (!err.response) {\n      // notif(\"سرور متصل نمی‌باشد\", \"danger\", 3);\n    } else if (err.response > 499 && err.response < 600) {\n      // notif(\"خطا در اتصال، مجدداً تلاش کنید\", \"danger\", 3);\n    }\n  };\n\n  handleRes = (res) => {};\n\n  Get(url, params) {\n    return new Promise((resolve, reject) => {\n      const data: any = { method: \"get\", params: { ...this.params } };\n      if (params) data.params = { ...this.params, ...params };\n      this.xhr\n        .request(url, data)\n        .then((res) => {\n          this.handleRes(res);\n          resolve(res);\n        })\n        .catch((err) => {\n          this.handleErr(err);\n          reject(err);\n        });\n    });\n  }\n\n  Put(url, params) {\n    return new Promise((resolve, reject) => {\n      let itemParams = { ...this.params };\n      if (params) itemParams = { ...this.params, ...params };\n      this.xhr\n        .put(url, itemParams)\n        .then((res) => {\n          this.handleRes(res);\n          resolve(res);\n        })\n        .catch((err) => {\n          this.handleErr(err);\n          reject(err);\n        });\n    });\n  }\n\n  Post(url, params) {\n    return new Promise((resolve, reject) => {\n      let itemParams = { ...this.params };\n      if (params) itemParams = { ...this.params, ...params };\n      this.xhr\n        .post(url, itemParams)\n        .then((res) => {\n          this.handleRes(res);\n          resolve(res);\n        })\n        .catch((err) => {\n          this.handleErr(err);\n          reject(err);\n        });\n    });\n  }\n\n  Upload(url, data, uploadCallback) {\n    return new Promise(async (resolve, reject) => {\n      this.xhr\n        .post(url, data, {\n          headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"multipart/form-data;\",\n          },\n          onUploadProgress: uploadCallback\n            ? (e) => {\n                let progress = Math.floor((e.loaded * 100) / e.total);\n                uploadCallback(progress);\n              }\n            : null,\n        })\n        .then((res) => {\n          this.handleRes(res);\n          resolve(res);\n        })\n        .catch((err) => {\n          this.handleErr(err);\n          reject(err);\n        });\n    });\n  }\n\n  Delete(url, data) {\n    return new Promise((resolve, reject) => {\n      let itemdata = { ...this.params };\n      if (data) itemdata = { ...this.params, ...data };\n      this.xhr\n        .delete(url, { data: itemdata })\n        .then((res) => {\n          this.handleRes(res);\n          resolve(res);\n        })\n        .catch((err) => {\n          this.handleErr(err);\n          reject(err);\n        });\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}