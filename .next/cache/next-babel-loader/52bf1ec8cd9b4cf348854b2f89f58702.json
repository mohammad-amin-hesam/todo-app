{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Router from \"next/router\";\nimport moment from \"jalali-moment\";\nexport var toPersian = function toPersian(val) {\n  if (val) {\n    var id = [\"۰\", \"۱\", \"۲\", \"۳\", \"۴\", \"۵\", \"۶\", \"۷\", \"۸\", \"۹\"];\n    return val.toString().replace(/[0-9]/g, function (w) {\n      return id[+w];\n    });\n  } else {\n    return val;\n  }\n};\nexport var moneyFormat = function moneyFormat(n, x) {\n  try {\n    var re = \"\\\\d(?=(\\\\d{\" + (x || 3) + \"})+\" + (n > 0 ? \"\\\\.\" : \"$\") + \")\";\n    return this.toFixed(Math.max(0, ~~n)).replace(new RegExp(re, \"g\"), \"$&,\");\n  } catch (e) {\n    return \"\";\n  }\n};\nexport var underLine = function underLine() {\n  this.replace(\"/s/g\", \"_\");\n};\nexport var toEnglish = function toEnglish(val) {\n  var find = [\"۰\", \"۱\", \"۲\", \"۳\", \"۴\", \"۵\", \"۶\", \"۷\", \"۸\", \"۹\"];\n  var replace = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n  var replaceString = val;\n  var regex;\n\n  for (var i = 0; i < find.length; i++) {\n    regex = new RegExp(find[i], \"g\");\n    replaceString = replaceString.replace(regex, replace[i]);\n  }\n\n  return replaceString;\n};\nexport var remove = function remove() {\n  var what,\n      a = arguments,\n      L = a.length,\n      ax;\n\n  while (L && this.length) {\n    what = a[--L];\n\n    while ((ax = this.indexOf(what)) !== -1) {\n      this.splice(ax, 1);\n    }\n  }\n\n  return this;\n};\nexport function trunc(s, n) {\n  if (s) {\n    return s.length > n ? s.substr(0, n - 1) + \"...\" : s;\n  } else {\n    return \"\";\n  }\n}\nexport var setIfNumber = function setIfNumber(e, setFieldValue, max) {\n  if (!isNaN(Number(toEnglish(e.target.value)))) {\n    if (!max) {\n      setFieldValue(e.target.name, toEnglish(e.target.value));\n    } else {\n      if (e.target.value.length <= max) {\n        setFieldValue(e.target.name, toEnglish(e.target.value));\n      }\n    }\n  }\n};\nexport var setCookie = function setCookie(cName, cValue, seconds) {\n  var d = new Date();\n  var sec = seconds * 1000;\n  d.setTime(d.getTime() + sec);\n  var expires = \"expires=\".concat(d.toUTCString());\n  document.cookie = \"\".concat(cName, \"=\").concat(cValue, \"; \").concat(expires, \";path=/\");\n};\nexport var getCookie = function getCookie(cName) {\n  var name = \"\".concat(cName, \"=\");\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(\";\");\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == \" \") {\n      c = c.substring(1);\n    }\n\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n\n  return \"\";\n};\nexport var checkProtected = function checkProtected(ctx, callback) {\n  var store, res, _store$getState, auth;\n\n  return _regeneratorRuntime.async(function checkProtected$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          store = ctx.store, res = ctx.res;\n          _store$getState = store.getState(), auth = _store$getState.auth;\n          _context.t0 = auth.role;\n          _context.next = _context.t0 === \"user\" ? 5 : 9;\n          break;\n\n        case 5:\n          if (!callback) {\n            _context.next = 8;\n            break;\n          }\n\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(callback());\n\n        case 8:\n          return _context.abrupt(\"break\", 11);\n\n        case 9:\n          if (res) {\n            res.writeHead(302, {\n              Location: \"/login\"\n            });\n            res.end();\n            res.finished = true;\n          } else {\n            Router.push(\"/login\");\n          }\n\n          return _context.abrupt(\"break\", 11);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport function daysRemaining(time) {\n  var eventdate = moment(time);\n  var todaysdate = moment();\n  return eventdate.diff(todaysdate, \"days\");\n}\nexport var checkPremiumDate = function checkPremiumDate(ctx, callback) {\n  var store, res, _store$getState2, user, premium_date, redirect;\n\n  return _regeneratorRuntime.async(function checkPremiumDate$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          store = ctx.store, res = ctx.res;\n          _store$getState2 = store.getState(), user = _store$getState2.user;\n          premium_date = user.item.premium_date; // const testDate = \"2020-08-17T07:59:48.365000\";\n\n          redirect = function redirect() {\n            if (res) {\n              res.writeHead(302, {\n                Location: \"/packages\"\n              });\n              res.end();\n              res.finished = true;\n            } else {\n              Router.push(\"/packages\");\n            }\n          };\n\n          if (!premium_date) {\n            _context2.next = 14;\n            break;\n          }\n\n          if (!(daysRemaining(premium_date) < 0)) {\n            _context2.next = 9;\n            break;\n          }\n\n          redirect();\n          _context2.next = 12;\n          break;\n\n        case 9:\n          if (!callback) {\n            _context2.next = 12;\n            break;\n          }\n\n          _context2.next = 12;\n          return _regeneratorRuntime.awrap(callback());\n\n        case 12:\n          _context2.next = 15;\n          break;\n\n        case 14:\n          redirect();\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\nexport var daysLeft = function daysLeft(date) {\n  var now = moment();\n  return now.diff(date, \"days\");\n};\nexport function deleteCookie(name) {\n  document.cookie = name + \"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\n}\nexport function uniq_id() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == \"x\" ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}","map":null,"metadata":{},"sourceType":"module"}